---
title: 클라우드 보안 교육 내용 정리
excerpt: 임시저장용
---

강의 : 연수권

## 1. 컨테이너 개요
구글에서 만든 쿠버네티스는 컨테이너들을 관리해주는 tool이라 볼 수 있습니다. 컨테이너는 개별 소프트웨어의 실행에 필요한 실행환경을 독립적으로 운용할 수 있도록 도와줍니다. 컨테이너는 os위에 올라가는 

물리서버 -> 가성서버(vm) 기존의 가상서버는 vm위에 가상 os위에 웹을 올리는 구조로 사용했습니다. vm이 하드웨어로부터 할당받습니다. os마다 별도의 os를 설치해주어야하여 용량 및 성능 이슈가 있었습니다.  
### 1.1. 가상서버와 컨테이너의 차이
반면 컨테이너는 os위에 가상 컨테이너에서 앱이 실행되기 때문에 

vm 컨테이너 : vm 관리자 위의 os에 컨테이너를 올립니다.  

- 애플리케이셔 ㄴ레벨 고립
- vm보다 빠른 셋업, 메모리 덜 사용
- 애플리케이션 전달 시간 감소, 유지보수 향상
- 마이그레이션, 백업, 전송이 쉬움

- 반면 서로 간섭할가능성이 있어 보안이슈가 나오고 있다.

### 1.2. 기업이 컨테인를 사용하는 이유
클라우드는 최신기술이 아니지만 대세로 자리잡고 있습니다. 속도에 굉장한 이점이 있습니다. 또한, 빠른개발을 위해 agile 방범론을 적용하고, devops를 통해 시스템 엔지니어가 하던 일을 자동화 합니다.  
개발자 중심의 신속한 배포지언, 오픈소스 문화, 빅데이터 처리, msa구조의 용이 등 서비스의 가용성과 확장성에 이득

### 1.3. 컨테이너 기술 아키텍처의 계층 및 컴포넌트, 라이프 사이클
이미지 생성/테스트/승인(1티어) - 이미지 저장/회수(2티어) - 이미지 배치/관리(3티어)
개발자 단계 - 레지스트리 단계(저장소) - 오케스트레이터(쿠버네티스, 도커 등) - 호스트(컨테이너)

## 2. 컨테이너 보안 위험
### 2.1 컨테이너 보안의 필요성
컨테이너/이미지 보안에 대한 제한된 가시성.

### 2.2. 컨테이너 보안 위협
접근 제어, 권한 관리, 통신 암호화를 토대로 생각.
이미지 리스크 : 이미지 취약점, 이미지 설정 결함, 악성코드 포함, 중요정보의 평문 저장(비암호화), 신뢰할 수 없는 이미지 사용
레지스트리 리스크 : 안전하지 않은 레지스트리 연결, 불충분한 인증 및 인가(권한 최소화), 레지스트리의 노후된 이미지
오케스트레이터 리스크 : 관리자 접근 통제 미흡, 인가되지 않은 접근, 컨테이너 내 네트워크 트래픽 분리 미흡, 워크로드 혼합, 오케스트레이터 신뢰
컨테이너 리스크 : 컨테이너 런타임 내 취약점, 제한되지 않은 네트워크 취약점, 안전하지 않은 컨테이너 런타임 설정, 앱 취약점, 불량 컨테이너
호스트 os 리스크 : 넓은 공격 표면, 공유 커널, 호스트 os 컴포넌트 취약점, 부적절한 사용자 접근 권한, 호스트 os 파일 시스템 변조(vm과 달리 분리되어 있지 않아서 생기는 문제)

## 3. 컨테이너 기술 생명 주기 보안 고려사항
착수 단계 - 계획 단계 - 구현 단계 - 운용 단계 - 폐기 단계
 - 워크로드 관리 - 구현 - 모니터링 - 

## 4. 클라우드 네이티브 환경엣의 컨테이너 보안
클라우드 보안 : 보안 자동화 및 대응, 클라우드 워크로드 보호(가용성 관리)
클러스터 보안 : 민감한 데이터를 이미지에 포함되지 않도록 행햐ㅏㅁ
컨테이너 보안
코드 보안

## 5. 도커 보안
### 5.1. 도커 아키텍처
도커 클라이언트 : 도커를 실행하는 도커 데몬과 통신하기 위한 수단
도커 레지스트리
도커 데몬 : 프로세스를 처리해줌
도커 이미지
도커 컨테이너 : 이미지를 실행시키는 환경

### 5.2. 도커 보안 강화 방안
도커 최신 패치 적용, 도커 그룹에 불필요한 사용자 제거, docker host 관련 파일 audit 설정(모니터링 설정)
도커 deamon 설정 : default bridge를 통한 컨테이너 간 네트워크 트래픽 제한, legacy registry(v1) 비활성화, suid,sgid(일시적으로 root권한을 가져온느것, 비밀번호 변경 등)를 통해 추가 권한을 얻는 것을 제한
컨테이너 이미지 및 빌드 팡리 : root가 아닌 user로 컨테이너 실행
컨테이너 런타임 : 컨테이너에서 ssh사용 금지, 컨테이너에 privileged 포트 매핑 금지, PIDs cgroup 제한, default bridge docker()사용 제한

## 6. 쿠버네티스 보안
파드 : 컨테이너 한개 이상을 관리하는 단위
master node와 worker node로 구분되어 woker node가 실제로 일을 하는 노드
### 6.1. 쿠버네티스 아키텍처
master node: 클러스트를 관리
kuberctl : api서버와 통신하여 명령을 내림
api tjqj
etcd: 구셩요소들의 상태값을 저장
컨트롤 매니저
스케줄러 : 노드들의 상태를 고려해 파드를 어떤 워커 노드에 생성할지 결정

워커노드 : 실제컨테이너를 실행, agent 형태
kubelet : agent 형태로 전달
파드
컨테이너 런타임

### 6.2. 쿠버네티스 보안 강화 방안
마스터노드 
yml파일 설정을 변경하며 적용
